{
  "symbol": "BTCUSD",
  "symbols": ["BTCUSD"],
  "symbol_configs": {
    "BTCUSD": {"lot": 0.01, "sl_pips": 100, "tp_pips": 150}
  },
  
  "_position_sizing_comment": "Dynamic position sizing calculates lot based on account balance and risk per trade",
  "dynamic_position_sizing": {
    "enabled": true,
    "risk_percent": 1.0,
    "_risk_comment": "Percent of account to risk per trade (1.0 = 1%). Overrides fixed lot size when enabled.",
    "min_lot": 0.01,
    "max_lot": 0.10,
    "_lot_limits_comment": "Safety limits - never go below min or above max regardless of calculation"
  },

  "sl_pips": 100,
  "tp_pips": 150,
  "atr_period": 14,
  "atr_multiplier": 1.5,
  "enable_trailing_stop": false,
  "strategy": "ml_xgboost",
  "bollinger_period": 20,
  "bollinger_stddev": 2,
  "rsi_period": 14,
  "macd_fast": 12,
  "macd_slow": 26,
  "macd_signal": 9,
  "timeframe": "M5",
  "higher_timeframe": "H1",
  "backtest_period_days": 30,
  "forward_test_period_days": 28,
  "max_daily_loss": 100,
  "max_daily_profit": 200,
  "_min_atr": "0.0005",
  "min_atr": 0,
  "_comment": "Set min_atr to 0 to disable the volatility filter.",
  "news_block_minutes": 30,

  "_defensive_trading_comment": "Defensive trading settings to protect against consecutive losses and bad market conditions",
  
  "_ema_trend_filter_comment": "EMA Trend Filter: Only trade WITH the trend. BUY blocked in downtrend, SELL blocked in uptrend.",
  "enable_ema_trend_filter": true,
  "ema_fast_period": 50,
  "ema_slow_period": 200,
  "_ema_explanation": "UPTREND = EMA50 > EMA200 (allow BUY). DOWNTREND = EMA50 < EMA200 (block BUY).",
  
  "max_spread_percent": 0.05,
  "_max_spread_comment": "Maximum spread as % of price. For BTCUSD at $100k, 0.05% = $50 max spread. Set to 0 to disable.",
  "loss_cooldown_minutes": 15,
  "_loss_cooldown_comment": "Minutes to wait after a losing trade before entering next trade. Set to 0 to disable.",
  "max_consecutive_losses": 3,
  "_max_consecutive_comment": "Pause trading for 1 hour after this many consecutive losses. Set to 0 to disable.",

  "_session_trading_comment": "Session-aware trading: Trade only during optimal market hours",
  "session_trading": {
    "enabled": true,
    "sessions": {
      "asian": {
        "start_utc": 0,
        "end_utc": 8,
        "enabled": true,
        "confidence_adjustment": 0.05,
        "_comment": "Tokyo session - lower volume, add 5% to confidence threshold"
      },
      "european": {
        "start_utc": 7,
        "end_utc": 16,
        "enabled": true,
        "confidence_adjustment": 0,
        "_comment": "London session - high volume, normal trading"
      },
      "american": {
        "start_utc": 13,
        "end_utc": 21,
        "enabled": true,
        "confidence_adjustment": 0,
        "_comment": "New York session - high volatility, good for breakouts"
      },
      "off_hours": {
        "enabled": false,
        "confidence_adjustment": 0.10,
        "_comment": "21:00-00:00 UTC - lowest liquidity, DISABLED by default"
      }
    }
  },

  "_partial_profit_comment": "Partial Profit Taking: Close portion of position at 1R, move SL to breakeven",
  "partial_profit_taking": {
    "enabled": true,
    "close_percent": 50,
    "trigger_at_rr": 1.0,
    "move_sl_to_breakeven": true,
    "_explanation": "When price moves 1x your risk (SL distance), close 50% and move SL to entry."
  },

  "_smart_exit_comment": "Smart Exit Logic: Time-based exit and stagnation detection",
  "smart_exit": {
    "enabled": true,
    "max_hold_minutes": 120,
    "close_if_stagnant": true,
    "stagnant_threshold_percent": 0.02,
    "_explanation": "Close if held > 2 hours OR price moved < 0.02% from entry after 30 min."
  }
}
